# 💾 포인트 저장 안전성

## ✅ 포인트는 안전합니다!

### Render 재시작 시
```
✅ PostgreSQL 데이터베이스는 별도 서비스
✅ 데이터는 영구 저장됨
✅ 포인트 사라지지 않음!
```

---

## 🗂️ 데이터 구조

```
Render 서버 구조:
├── Web Service (애플리케이션)
│   ├── 시작/중지됨
│   └── 재시작 시 메모리만 초기화
│
└── PostgreSQL 데이터베이스 (별도)
    ├── 영구 저장소
    ├── 항상 실행 중
    └── 재시작해도 데이터 유지!
```

---

## 📊 비교

| 상황 | 포인트 상태 |
|------|------------|
| Render 웹 서비스 재시작 | ✅ 유지 |
| Render 웹 서비스 재배포 | ✅ 유지 |
| Git push 후 자동 배포 | ✅ 유지 |
| 데이터베이스 재시작 | ✅ 유지 |
| 데이터베이스 삭제 | ❌ 사라짐 |
| DB 데이터 백업 없이 삭제 | ❌ 사라짐 |

---

## 🔒 안전한 이유

### PostgreSQL 데이터베이스
- Render의 **별도 서비스**
- **영구 저장소** 사용
- **자동 백업** 기능 (유료 플랜)
- 재시작해도 **데이터 유지**

### Render 웹 서비스 재시작
- 애플리케이션 **코드만** 재로드
- **메모리에 있는 변수만** 초기화
- **DB의 데이터는 영향 없음**

---

## 🎮 실제 상황

### 시나리오 1: Render 재배포
```
1. 사용자가 플레이 → 포인트 10개
2. Render 배포 시작
3. 서버 잠깐 멈춤
4. 배포 완료
5. 사용자 포인트: 여전히 10개 ✅
```

### 시나리오 2: 업데이트 배포
```
1. 새로운 코드 push
2. Render 자동 배포
3. DB는 그대로 ✅
4. 포인트 그대로 ✅
```

---

## ⚠️ 포인트가 사라지는 경우

### 1. 데이터베이스 삭제
```
DELETE DATABASE → ❌ 모든 데이터 사라짐
```

### 2. 데이터베이스 재초기화
```
DROP TABLE → ❌ 테이블 데이터 사라짐
```

### 3. 코드 버그로 데이터 삭제
```python
db.query(PlayerPoints).delete()  # ❌ 수동으로 삭제한 경우
```

---

## 💡 안전 장치

### 자동 백업 (유료 플랜)
- PostgreSQL 데이터베이스는 자동 백업
- 지난 7일간의 백업 보관
- 필요 시 복구 가능

### 데이터 보존
- Render Web Service만 재시작 → DB는 영향 없음
- 코드 배포 → DB는 영향 없음
- 컴퓨터 꺼져도 → DB는 Render 클라우드에 저장됨

---

## 📋 요약

**질문: Render 리붓할 때마다 포인트 초기화?**
**답변: ❌ 아니오! 안전합니다!**

포인트는 PostgreSQL 데이터베이스에 저장되며:
- ✅ Render 웹 서비스 재시작해도 안전
- ✅ 코드 업데이트해도 안전
- ✅ GitHub push 후 자동 배포해도 안전
- ✅ 데이터베이스가 별도로 실행 중

---

**걱정하지 마세요! 포인트는 영구 저장됩니다!** 💾

