# 🚀 배포 체크리스트 - 최종

## ✅ 배포 준비 완료 상태

### 1. 코드 상태
- ✅ 백엔드 API 완료
- ✅ 플러그인 코드 완료
- ✅ 홈페이지 UI 완료
- ✅ DB 모델 완료

### 2. 배포 후 해야 할 작업

---

## 📋 Step 1: 빙고 아이템 초기화

배포가 성공하면, Render Shell 또는 로컬에서 실행:

```bash
# 환경변수 설정
export DATABASE_URL="postgresql://admin:GS47JSwa85XQUCIaNUOM7GbMv5UMcXZ7@dpg-d3vah2uuk2gs73eeb1jg-a/ramjwi"

# 빙고 아이템 초기화
cd backend
python manage_bingo.py init
```

**예상 출력:**
```
✅ 빙고판 81칸 초기화 완료!
   S+: 1개, S: 3개, A: 6개, B: 18개, C: 27개, D: 26개
```

---

## 🔧 Step 2: 플러그인 빌드 및 설치

### 플러그인 빌드:

```bash
cd plugin
mvn clean package
```

**빌드 후 파일 위치:**
```
plugin/target/pointsplugin-1.0.0.jar
```

### Config 수정 (중요!)

`plugin/src/main/resources/config.yml` 또는 서버의 `plugins/PointsPlugin/config.yml`:

```yaml
api:
  url: "https://your-actual-render-url.onrender.com"  # ← 실제 URL로 변경!
  secret: "asas1212@@"  # Backend와 동일
```

### 플러그인 설치:

1. `plugin/target/pointsplugin-1.0.0.jar` 파일 복사
2. 마인크래프트 서버의 `plugins` 폴더에 붙여넣기
3. 서버 재시작

### 확인:

서버 로그에서 확인:
```
[PointsPlugin] API URL: https://...
[PointsPlugin] 활성화됨!
```

---

## 🧪 Step 3: 테스트

### 1. 홈페이지 테스트

브라우저에서 접속:
```
https://your-render-url.onrender.com
```

**확인 사항:**
- [ ] 빙고 포인트 섹션 표시됨
- [ ] 마인크래프트 닉네임 입력 가능
- [ ] 9x9 빙고판 표시됨

### 2. API 테스트

```bash
# Health check
curl https://your-render-url.onrender.com/api/health

# 빙고 아이템 조회
curl https://your-render-url.onrender.com/api/bingo/items
```

### 3. 플러그인 테스트

1. 서버 접속
2. 30분 기다림 (또는 테스트용으로 플러그인 코드 수정)
3. 콘솔 로그 확인:
   ```
   [PointsPlugin] PlayerName에게 포인트가 지급되었습니다.
   ```
4. 플레이어에게 메시지 표시:
   ```
   §a[포인트] 30분 플레이 완료! 포인트 1개 획득!
   ```

### 4. 포인트 테스트

1. 서버에서 포인트 획득
2. 홈페이지 → 빙고 포인트 → 마인크래프트 닉네임 입력
3. 보유 포인트 확인
4. 빙고 칸 선택

---

## 🔍 문제 해결

### 배포 실패 시:

**Logs에서 확인:**
```bash
# 확인할 오류:
- "Can't connect to database" → DATABASE_URL 확인
- "ModuleNotFoundError" → requirements.txt 확인  
- "Application startup complete" → 정상!
```

### 빙고판이 안 보일 때:

**Browser Console (F12):**
```javascript
// API 응답 확인
fetch('/api/bingo/items')
  .then(r => r.json())
  .then(console.log)
```

### 플러그인 오류:

**서버 로그 확인:**
```
[PointsPlugin] ERROR: ...
```

**확인사항:**
- config.yml의 `api.url`이 실제 Render 주소인지
- `SHARED_SECRET`이 Backend와 일치하는지
- 서버가 인터넷에 연결되어 있는지

---

## 📊 현재 상태

- ✅ 코드 작성 완료
- ⏳ 배포 대기 중
- ⏳ 빙고 아이템 초기화 대기 중
- ⏳ 플러그인 빌드 대기 중
- ⏳ 테스트 대기 중

---

## 🎯 순서 정리

1. **Render 배포** ← 지금 이 단계
2. 빙고 아이템 초기화 (배포 후)
3. 플러그인 빌드 (언제든지 가능)
4. 플러그인 설치 (마인크래프트 서버)
5. 테스트

---

**배포 진행 후 다음 단계 안내해드리겠습니다!** 🚀

