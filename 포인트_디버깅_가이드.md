# ğŸ› í¬ì¸íŠ¸ ë””ë²„ê¹… ê°€ì´ë“œ

## ë¬¸ì œ: í¬ì¸íŠ¸ê°€ ì•ˆ ì˜¬ë¼ì˜´

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### 1. í”ŒëŸ¬ê·¸ì¸ ì‘ë™ í™•ì¸
```
âœ… ì„œë²„ ë¡œê·¸ì—ì„œ í™•ì¸:
```
```
[PointsPlugin] API URL: https://...
[PointsPlugin] í™œì„±í™”ë¨!
```

#### 2. í¬ì¸íŠ¸ ì§€ê¸‰ í™•ì¸
í”Œë ˆì´ì–´ê°€ 1ë¶„ í”Œë ˆì´ í›„:
```
âœ… ì„œë²„ ì½˜ì†” í™•ì¸:
[PointsPlugin] PlayerNameì—ê²Œ í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.
```

#### 3. API ì—°ê²° í™•ì¸
ì½˜ì†”ì— ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ í™•ì¸:
```
âŒ "Can't connect to API" 
âŒ "Connection timeout"
âŒ "HTTP 401 Unauthorized"
âŒ "HTTP 404 Not Found"
```

#### 4. í™ˆí˜ì´ì§€ API í…ŒìŠ¤íŠ¸
```bash
curl https://prelaunch-all-in-one.onrender.com/api/health
```

ì˜ˆìƒ ì‘ë‹µ:
```json
{"ok": true}
```

---

## ğŸ” ë‹¨ê³„ë³„ í™•ì¸

### Step 1: í”ŒëŸ¬ê·¸ì¸ í™œì„±í™” í™•ì¸

ì„œë²„ ì½˜ì†”ì—ì„œ:
```
/plugins
```

`PointsPlugin`ì´ **ì´ˆë¡ìƒ‰**ìœ¼ë¡œ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

---

### Step 2: API URL í™•ì¸

ì„œë²„ ë¡œê·¸ì—ì„œ:
```
[PointsPlugin] API URL: https://...
```

ì´ URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸!

---

### Step 3: í”Œë ˆì´ì–´ í¬ì¸íŠ¸ í™•ì¸

ê²Œì„ì—ì„œ:
```
/pointsp  # ëª…ë ¹ì–´ ëª©ë¡
```

API í˜¸ì¶œ í…ŒìŠ¤íŠ¸:
```bash
# í”Œë ˆì´ì–´ UUID í™•ì¸ í›„
curl https://prelaunch-all-in-one.onrender.com/api/points/{í”Œë ˆì´ì–´UUID}
```

ì˜ˆìƒ ì‘ë‹µ:
```json
{
  "uuid": "...",
  "points": 0,
  "playtime_minutes": 0
}
```

---

### Step 4: í”ŒëŸ¬ê·¸ì¸ ë¡œê·¸ í™•ì¸

ì„œë²„ ì½˜ì†”ì—ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸:
```
[PointsPlugin] PlayerNameì—ê²Œ í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.  # âœ… ì •ìƒ
```

ë˜ëŠ”:
```
[PointsPlugin] í¬ì¸íŠ¸ ì§€ê¸‰ ì‹¤íŒ¨: ...  # âŒ ì˜¤ë¥˜
```

---

## ğŸš¨ ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜

### 1. SHARED_SECRET ë¶ˆì¼ì¹˜
```
ì˜¤ë¥˜: HTTP 401 Unauthorized
```

í•´ê²°:
- í”ŒëŸ¬ê·¸ì¸ config.ymlì˜ `secret` í™•ì¸
- Backend í™˜ê²½ë³€ìˆ˜ì˜ `SHARED_SECRET` í™•ì¸
- ë‘˜ì´ ì¼ì¹˜í•´ì•¼ í•¨!

---

### 2. API URL ì˜¤ë¥˜
```
ì˜¤ë¥˜: Can't connect to API
Connection timeout
```

í•´ê²°:
- config.ymlì˜ `api.url` í™•ì¸
- URL ëì— ìŠ¬ë˜ì‹œ(/) ì—†ëŠ”ì§€ í™•ì¸
- HTTPSì¸ì§€ í™•ì¸

---

### 3. DB ì—°ê²° ì˜¤ë¥˜
```
ì˜¤ë¥˜: Database connection failed
```

í•´ê²°:
- Renderì˜ DATABASE_URL í™•ì¸
- PostgreSQL ì—°ê²° í™•ì¸

---

### 4. í”ŒëŸ¬ê·¸ì¸ì´ 1ë¶„ ê°„ê²©ìœ¼ë¡œ ì‹¤í–‰ ì•ˆë¨

config.yml í™•ì¸:
```yaml
points:
  interval_minutes: 1  # 1ë¶„ìœ¼ë¡œ ë³€ê²½í–ˆëŠ”ì§€ í™•ì¸!
```

í”ŒëŸ¬ê·¸ì¸ ì½”ë“œëŠ” **ì½”ë“œ ë‚´ë¶€ê°€ 30ë¶„ìœ¼ë¡œ ê³ ì •**ë˜ì–´ ìˆìŠµë‹ˆë‹¤!

---

## âš ï¸ ì¤‘ìš”: í”ŒëŸ¬ê·¸ì¸ ì½”ë“œ ìˆ˜ì • í•„ìš”!

í”ŒëŸ¬ê·¸ì¸ì´ í•˜ë“œì½”ë”©ëœ 30ë¶„ìœ¼ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤!

`plugin/src/main/java/com/ramjwi/points/PointsPlugin.java` 73ë²ˆ ì¤„:

```java
// í˜„ì¬ (30ë¶„ ê³ ì •)
if (currentMinutes - lastCheck >= 30) {
```

ì´ ë¶€ë¶„ì„ configì—ì„œ ì½ì–´ì˜¤ë„ë¡ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤!

---

## ğŸ”§ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸

### 1. API ìˆ˜ë™ í…ŒìŠ¤íŠ¸
```bash
# í”ŒëŸ¬ê·¸ì¸ API ì§ì ‘ í˜¸ì¶œ
curl -X POST https://prelaunch-all-in-one.onrender.com/api/plugin/add-points/{UUID} \
  -H "Content-Type: application/json" \
  -H "X-Prelaunch-Secret: asas1212@@" \
  -d '{"minutes": 1}'
```

ì˜ˆìƒ ì‘ë‹µ:
```json
{"ok": true, "total_points": 1, "total_minutes": 1}
```

---

**ì–´ë–¤ ë‹¨ê³„ì—ì„œ ë§‰íˆëŠ”ì§€ ì•Œë ¤ì£¼ì‹œë©´ ë” ì •í™•íˆ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤!** ğŸ”

